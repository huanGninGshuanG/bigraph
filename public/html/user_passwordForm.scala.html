<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<title>用户修改密码页面</title>

<link href="../stylesheets/css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
<link href="../stylesheets/css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
<link href="../stylesheets/css/animate.min.css" rel="stylesheet">
<link href="../stylesheets/css/style.min862f.css?v=4.1.0" rel="stylesheet">
<link href="../stylesheets/css/dxs.min.css" rel="stylesheet">
</head>
<body>
	<div class="wrapper wrapper-content animated fadeInUp">
		<br>
		<form class=" form-horizontal" id="aipUserPasswordForm">
			<div class="form-group" >
				<label class="col-sm-2 control-label"><font color=red>*</font>输入旧密码:</label>
				<div class="col-sm-10" >
					<input id="aipUserOldLoginpwd" name="oldLoginpwd" type="password" class="form-control" >
				</div>
			</div>
			<div class="form-group" >
				<label class="col-sm-2 control-label"><font color=red>*</font>输入新密码:</label>
				<div class="col-sm-10">
					<input id="aipUserNewLoginpwd" name="newLoginpwd" type="password" class="form-control" >
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label"><font color=red>*</font>确认新密码:</label>
				<div class="col-sm-10">
					<input id="aipUserAgainLoginpwd" name="againLoginpwd" type="password" class="form-control" >
				</div>
			</div>
		</form>
	</div>
	<script src="../javascripts/js/jquery.min.js?v=2.1.4"></script>
	<script src="../javascripts/js/bootstrap.min.js?v=3.3.6"></script>
	<script src="../javascripts/js/content.min.js?v=1.0.0"></script>
	<script src="../javascripts/js/plugins/pace/pace.min.js"></script>
	<script src="../javascripts/js/plugins/validate/jquery.validate.min.js"></script>
	<script src="../javascripts/js/plugins/validate/messages_zh.min.js"></script>
	<script src="../javascripts/js/plugins/layer/layer.js"></script>
	<script src="../javascripts/js/dxs.core.js"></script>
	<script src="../javascripts/js/dxs.form.js"></script>
	<script type="text/javascript">
	$.validator.addMethod("addm", function(value) {
		var Regx = /[\u4E00-\u9FA5]/i;
	    
	    if (!Regx.test(value)) {
	        return true;
	    }
	        return false;
	  }, '请输入 "不可输入汉字"！');
	$.validator.addMethod("addm2", function(value) {
	    if (($('#aipUserNewLoginpwd').val())!=""&&($('#aipUserNewLoginpwd').val())==value) {
	        return true;
	    }
	        return false;
	  }, '请输入和新密码相同的密码！');
	
	$("#aipUserPasswordForm").validate({

		rules : {
			oldLoginpwd:{
				required : true,
				rangelength:[6,12],
			},
			newLoginpwd:{
				required : true,
				rangelength:[6,12],
				addm:true
			},
			againLoginpwd:{
				required : true,
				rangelength:[6,12],
				addm:true,
				addm2:true
			}
		},
		messages : {
			oldLoginpwd:{
				required : '原密码必须填写',
				rangelength:'密码必须在6-12之间'
			},
			newLoginpwd:{
				required : '新密码必须填写',
				rangelength:'密码必须在6-12之间'
			},
			againLoginpwd:{
				required : '确认密码必须填写',
				rangelength:'密码必须在6-12之间'
			}
		},
		onfocusout : function(element) {
			$(element).valid();
		}
	});
	
	function save(){
		if($("#aipUserPasswordForm").validate().form()){
			top.layer.confirm('<small>您确定要执行此操作吗?</small>', {
					title : '<small>系统提示</small>',
					closeBtn : 0,
					icon:0,
					// shift: 1, //提示框载入动画
					// skin: 'layui-layer-molv', //样式类名
					btn : [ '确定', '取消' ]
				}, function(confirmIndex) {
					top.layer.load(1, {
						shade : [ 0.2 ]
						// 透明度调整
					});
					$.ajax({
						url : '../../user/updateAipUsersPassword.do',
						dataType : 'json',
						type : 'post',
						data : {
							'oldLoginpwd' : $('#aipUserOldLoginpwd').val(),
							'newLoginpwd' : $('#aipUserNewLoginpwd').val()
						  },
						success : function(data) {
							if (data.success) {
								CommonUtils.notify("success","操作成功<br>","1500");
								top.layer.close(confirmIndex);
								var index = top.layer.getFrameIndex(window.name); // 先得到当前iframe层的索引
								top.layer.close(index); // 再执行关闭
							} else {
								CommonUtils.notify("error","操作失败<br>"+data.responseMessage,"4000");
								top.layer.close(confirmIndex);
								top.layer.closeAll('loading');
							}
						}
					});
				});
			}
		};
	</script>
</body>


<!-- Mirrored from www.zi-han.net/theme/hplus/form_validate.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 20 Jan 2016 14:19:16 GMT -->
</html>
