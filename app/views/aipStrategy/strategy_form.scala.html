<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<title>模拟执行页面</title>

<link href='@routes.Assets.versioned("stylesheets/css/bootstrap.min14ed.css?v=3.3.6")' rel="stylesheet">
<link href='@routes.Assets.versioned("stylesheets/css/font-awesome.min93e3.css?v=4.4.0")' rel="stylesheet">
<link href='@routes.Assets.versioned("stylesheets/css/animate.min.css")' rel="stylesheet">
<link href='@routes.Assets.versioned("stylesheets/css/style.min862f.css?v=4.1.0")' rel="stylesheet">
<link href='@routes.Assets.versioned("stylesheets/css/dxs.min.css")' rel="stylesheet">
</head>
<body>
	<div class="wrapper wrapper-content animated fadeInUp" style="height: 90%; overflow:auto">
<!-- 		<div class="row"> -->
<!-- 			<div class="col-sm-12"> -->
			  <ul class="nav nav-tabs">
                <li class="" id="li2"><a data-toggle="tab" href="#tab-1"><i class="fa fa-list-alt"></i> 执行模拟</a>
                </li>
              </ul>
              <div class="tab-content" style="height: 100%;">
			  <div id="tab-2" class="tab-pane active" style="height: 100%;">
        		<br>
        		<form class="form-horizontal" id="dxsStrategyForm" style="height: 100%;">
        			<table id="t2" class="table" style="margin: 0 auto;width: 97%;margin-left: -1.3%;height: 85%;"  valign="middle" >
        				<tbody>
							<tr>
								<td class="text-right" style="width: 15%">
									<label class="control-label">资源选择:</label>
								</td>
								<td>
									<select id="dxsResourceId" name="resourceId" class="form-control">
									</select>
									@*<span id="span1" class="help-block m-b-none"><i class="fa fa-info-circle"></i></span>*@
								</td>
							</tr>
        					<tr>
        						<td class="text-right" style="width: 15%">
								   	<label class="control-label">策略选择:</label>
								</td>
								<td>
									<select id="dxsStrategyId" name="strategyId" class="form-control">
									</select>
									@*<span id="span1" class="help-block m-b-none"><i class="fa fa-info-circle"></i></span>*@
								</td>
        					</tr>
@*        					<tr>
        						<td class="text-right" style="width: 15%">
								   	<label class="control-label">导入资源:</label>
								</td>
								<td>
									<input type="file" id="id-input-file-3" onchange="upload(this)"/> 
								</td>
        					</tr>*@
        					<tr>
        						<td class="text-right" style="width: 15%">
								   	<label class="control-label">情景数据:</label>
								</td>
								<td>
									<textarea id="dxsResourceFileContent" name="fileContent" class="form-control"  style="height:250px"></textarea>
								</td>
        					</tr>
        				</tbody>
        			</table>
					<div class="text-center">
						<button type="button" class="btn btn-lg btn-primary"  onclick="execSimulate()">执行模拟</button>
						<button type="button" class="btn btn-default btn-lg" disabled="disabled">查看日志</button>
					</div>

                </form>
	        </div>	
		</div>
	</div>
	<script src='@routes.Assets.versioned("javascripts/js/jquery.min.js?v=2.1.4")'></script>
	<script src='@routes.Assets.versioned("javascripts/js/bootstrap.min.js?v=3.3.6")'></script>
	<script src='@routes.Assets.versioned("javascripts/js/content.min.js?v=1.0.0")'></script>
	<script src='@routes.Assets.versioned("javascripts/js/plugins/validate/jquery.validate.min.js")'></script>
	<script src='@routes.Assets.versioned("javascripts/js/plugins/validate/messages_zh.min.js")'></script>
	<script src='@routes.Assets.versioned("javascripts/js/plugins/layer/layer.js")'></script>
	<script src='@routes.Assets.versioned("javascripts/js/dxs.core.js")'></script>
	<script src='@routes.Assets.versioned("javascripts/js/dxs.form.js")'></script>
	<script src='@routes.Assets.versioned("javascripts/js/plugins/pace/pace.min.js")'></script>
	<script src='@routes.Assets.versioned("javascripts/js/pages/aipResource/form.js")'></script>
	<script src='@routes.Assets.versioned("javascripts/js/pages/aipComponentLogs/main.js")'></script>

	<script type="text/javascript">
//		document.write(unescape("%3Cscript src='../../js/pages/aipResource/form.js?v=" + version + "' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
		$(document).ready(
			function(){
				initdxsResourceForm();
				getResource();
				getStrategy();
				$("#dxsResourceFileContent").height($(window).height() * 0.35);
				$(window).bind("resize", function() {
					$("#dxsResourceFileContent").height($(window).height() * 0.35);

				});
			}
		);


		function  getStrategy(){
			$.ajax({
				url:"../../strategy/listAll",
				// dataType : 'json',
				type : 'post',
				async : false,
				data :  "",
				success:function(data){
					if (data.success) {
						var select = $("#dxsStrategyId").empty();
						$.each(data.responseData.datas, function(){
							var option = $("<option></option>");
							option.attr("value", this.id);
							option.text(this.name);
							select.append(option);
						})
						// if (defaultValue)
						// 	select.val(defaultValue);
					}
				}
			})

		}

		function  getResource(){
			$.ajax({
				url:"../../resource/listAll",
				// dataType : 'json',
				type : 'post',
				async : false,
				data :  "",
				success:function(data){
					if (data.success) {
						var select = $("#dxsResourceId").empty();
						$.each(data.responseData.datas, function(){
							debugger
							var option = $("<option></option>");
							option.attr("value", this.id);
							option.text(this.name);
							select.append(option);
						})
						// if (defaultValue)
						// 	select.val(defaultValue);
					}
				}
			})

		}


		function execSimulate() {
			$.ajax({
				url:"../../strategy/execSimulate",
				// dataType : 'json',
				type : 'post',
				async : false,
				contentType : "application/x-www-form-urlencoded; charset=utf-8",
				data :  $("#dxsStrategyForm").serialize(),
				success:function(data){
					console.log(data)
					if (data.success) {
						openLogDetailLayer(true, data.responseData);
					}
				}
			})
		}

	</script>
</body>
<!-- Mirrored from www.zi-han.net/theme/hplus/form_validate.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 20 Jan 2016 14:19:16 GMT -->
</html>
